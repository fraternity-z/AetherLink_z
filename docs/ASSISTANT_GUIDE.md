# 智能体助手使用指南

## 功能概述

智能体助手功能允许你在不同的专业助手之间切换，每个助手都有自己的系统提示词（System Prompt），可以让 AI 扮演不同的角色来帮助你完成特定任务。

## 核心特性

- 🤖 **系统预设助手**：提供多种专业助手（编程、翻译、写作等）
- 🎨 **个性化图标**：每个助手都有独特的 Emoji 图标
- 💬 **专属提示词**：每个助手都有定制的系统提示词
- ✨ **无缝切换**：可随时切换助手，新对话将使用新助手的提示词
- 📊 **可扩展**：支持添加自定义助手（未来功能）

## 使用方法

### 1. 查看当前助手

在聊天界面顶部导航栏中，你可以看到当前选中的助手名称和图标：

```
[菜单] 🤖 默认助手 [模型] [话题]
```

### 2. 添加助手

初始状态只有「默认助手」，你可以添加更多助手：

1. 点击左上角的菜单按钮
2. 在侧边栏中选择「助手」标签
3. 点击底部的「添加助手」按钮
4. 在弹出的对话框中选择你想要添加的助手
5. 可以使用搜索框或标签过滤助手
6. 点击助手即可添加到侧边栏

### 3. 切换助手

1. 在侧边栏的助手列表中点击你想要使用的助手
2. 选中的助手会显示蓝色背景和勾选图标
3. 标题栏会立即更新为新助手的图标和名称

### 4. 移除助手

1. 点击助手右侧的关闭按钮（×）
2. 或长按助手项
3. 确认移除后，助手会从侧边栏移除
4. 注意：默认助手不能移除，但可以随时重新添加其他助手

### 5. 助手如何影响对话

当你发送消息时，系统会：

1. 获取当前选中助手的系统提示词
2. 将提示词作为 `system` 角色消息发送给 AI
3. AI 会根据提示词中的角色定位来回答你的问题

**示例**：

- 选择「编程助手」→ AI 会以专业开发者的身份回答编程问题
- 选择「翻译助手」→ AI 会专注于翻译和语言转换
- 选择「写作助手」→ AI 会帮助你改进文章、报告等

## 预设助手列表

### 基础助手

| 助手名称 | 图标 | 专长 | 适用场景 |
|---------|------|------|----------|
| 默认助手 | 😀 | 通用对话 | 日常对话、问答 |
| 网页分析助手 | 🌐 | 网页分析 | 分析网页内容 |
| 编程助手 | 💻 | 编程开发 | 代码编写、调试、算法 |
| 翻译助手 | 🌍 | 多语言翻译 | 文本翻译、本地化 |
| 写作助手 | ✍️ | 文本创作 | 文章润色、报告撰写 |

### 扩展助手

| 助手名称 | 图标 | 专长 | 适用场景 |
|---------|------|------|----------|
| 数学助手 | 🔢 | 数学问题 | 数学计算、公式推导 |
| 历史顾问 | 📜 | 历史知识 | 历史事件、人物分析 |
| 旅行规划助手 | ✈️ | 旅行规划 | 路线规划、景点推荐 |
| 健康顾问 | 🩺 | 健康建议 | 健康饮食、锻炼计划 |
| 电影专家 | 🎬 | 电影推荐 | 电影推荐、影评分析 |
| 美食顾问 | 🍳 | 烹饪建议 | 食谱推荐、烹饪技巧 |
| 情感支持助手 | 💗 | 情感陪伴 | 情绪疏导、心理支持 |
| 学习教育助手 | 🎓 | 学科教育 | 概念讲解、学习辅导 |
| 商业咨询助手 | 💼 | 商业策略 | 创业建议、营销策略 |
| 科技解说助手 | 📱 | 科技知识 | 科技产品、技术趋势 |
| 创意写作助手 | 📝 | 创意写作 | 故事创作、剧本开发 |
| 法律咨询助手 | ⚖️ | 法律知识 | 法律概念、基本咨询 |

## 技术实现

### 架构设计

```
用户选择助手
    ↓
保存到设置 (CurrentAssistantId)
    ↓
触发助手切换事件 (ASSISTANT_CHANGED)
    ↓
ChatHeader 更新显示
    ↓
用户发送消息
    ↓
ChatInput 读取当前助手
    ↓
获取助手的 systemPrompt
    ↓
作为 system 消息发送给 AI
```

### 相关文件

| 文件路径 | 说明 |
|---------|------|
| `types/assistant.ts` | 助手类型定义 |
| `constants/assistants.ts` | 预设助手数据 |
| `constants/prompts.ts` | 助手提示词库 |
| `storage/repositories/assistants.ts` | 助手数据仓库 |
| `storage/repositories/settings.ts` | 设置仓库（包含 CurrentAssistantId） |
| `components/chat/ChatSidebar.tsx` | 侧边栏（助手管理界面） |
| `components/chat/ChatHeader.tsx` | 顶部栏（显示当前助手） |
| `components/chat/ChatInput.tsx` | 输入框（使用助手提示词） |
| `components/chat/AssistantPickerDialog.tsx` | 助手选择对话框 |
| `utils/events.ts` | 事件系统（助手切换事件） |

### 数据流

1. **助手数据源**
   - 系统预设：`SYSTEM_ASSISTANTS` (constants/assistants.ts)
   - 用户启用：AsyncStorage (`al:assistants:enabled`)
   - 用户自定义：AsyncStorage (`al:assistants:custom`)

2. **启用逻辑**
   - 初始状态：只启用默认助手 `['default']`
   - 用户可以从系统预设中添加更多助手
   - 默认助手不能禁用

3. **当前助手存储**
   - AsyncStorage key: `al:settings:current_assistant_id`
   - 默认值: `'default'`

4. **事件通知**
   - 事件名: `AppEvents.ASSISTANT_CHANGED`
   - 参数: `assistantId: string`

## 未来规划

- [ ] 支持用户自定义助手
- [ ] 助手导入/导出功能
- [ ] 助手市场（分享和下载社区助手）
- [ ] 助手使用统计
- [ ] 对话历史关联助手信息

## 常见问题

### Q: 切换助手后，之前的对话会改变吗？

A: 不会。助手切换只影响新发送的消息。历史对话使用的是当时助手的提示词，不会被修改。

### Q: 可以在对话中途切换助手吗？

A: 可以。但建议在新对话开始时切换助手，这样 AI 的角色定位更加一致。

### Q: 所有 AI 模型都支持助手功能吗？

A: 是的。助手功能通过系统提示词实现，所有支持 system 角色消息的 AI 模型都可以使用。

### Q: 可以修改预设助手的提示词吗？

A: 目前预设助手的提示词是只读的。你可以在设置中修改「系统提示词」来覆盖默认行为，或者创建自定义助手（未来功能）。

## 相关文档

- [对话参数设置指南](./CHAT_PARAMS_GUIDE.md)
- [弹窗系统使用说明](./DIALOG_USAGE.md)
- [项目架构文档](../CLAUDE.md)
