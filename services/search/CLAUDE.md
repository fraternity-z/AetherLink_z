[æ ¹ç›®å½•](../../../CLAUDE.md) > [services](../../) > **search**

# ç½‘ç»œæœç´¢æœåŠ¡æ¨¡å—

## æ¨¡å—èŒè´£

ç½‘ç»œæœç´¢æœåŠ¡æ¨¡å— (`services/search/`) æä¾›ç»Ÿä¸€çš„æœç´¢å¼•æ“é›†æˆæ¥å£ï¼Œæ”¯æŒå¤šç§ç½‘ç»œæœç´¢æ–¹å¼ï¼Œä¸º AI èŠå¤©æä¾›å®æ—¶ç½‘ç»œä¿¡æ¯è·å–èƒ½åŠ›ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- ğŸŒ **å¤šæœç´¢å¼•æ“æ”¯æŒ**: Bingï¼ˆç½‘é¡µçˆ¬å–ï¼‰ã€Googleï¼ˆç½‘é¡µçˆ¬å–ï¼‰ã€Tavilyï¼ˆå®˜æ–¹ APIï¼‰
- ğŸ”„ **ç»Ÿä¸€æœç´¢æ¥å£**: é€šè¿‡ `SearchClient` æä¾›ä¸€è‡´çš„æœç´¢ä½“éªŒ
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜**: å†…ç½®æœç´¢ç»“æœç¼“å­˜æœºåˆ¶ï¼Œæé«˜å“åº”é€Ÿåº¦
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ğŸ¯ **ç»“æœè¿‡æ»¤**: æ”¯æŒç»“æœæ•°é‡é™åˆ¶å’Œè¶…æ—¶æ§åˆ¶

## å…¥å£ä¸å¯åŠ¨

### ä¸»è¦å…¥å£æ–‡ä»¶
- `SearchClient.ts` - ç»Ÿä¸€æœç´¢å®¢æˆ·ç«¯ï¼Œæä¾›ä¸»è¦çš„æœç´¢æ¥å£
- `types.ts` - æœç´¢ç›¸å…³çš„ç±»å‹å®šä¹‰
- `engines/` - å„ç§æœç´¢å¼•æ“çš„å…·ä½“å®ç°

### ä½¿ç”¨ç¤ºä¾‹
```typescript
import { performSearch, validateSearchConfig } from '@/services/search/SearchClient';

// æ‰§è¡Œ Bing æœç´¢
const results = await performSearch({
  engine: 'bing',
  query: 'React Native å¼€å‘',
  maxResults: 5,
  timeout: 10000,
  useCache: true
});

// æ‰§è¡Œ Tavily API æœç´¢
const apiResults = await performSearch({
  engine: 'tavily',
  query: 'AI æœ€æ–°å‘å±•',
  maxResults: 10,
  apiKey: 'your-tavily-api-key'
});

// éªŒè¯é…ç½®
const isValid = validateSearchConfig('tavily', apiKey);
```

## å¯¹å¤–æ¥å£

### `SearchClient.ts`
- `performSearch(options: SearchOptions): Promise<SearchResult[]>` - æ‰§è¡Œç½‘ç»œæœç´¢
- `validateSearchConfig(engine, apiKey?): boolean` - éªŒè¯æœç´¢å¼•æ“é…ç½®

### æœç´¢å¼•æ“å®ç°
- `engines/BingSearch.ts` - Bing æœç´¢å¼•æ“å®ç°
- `engines/GoogleSearch.ts` - Google æœç´¢å¼•æ“å®ç°
- `engines/TavilySearch.ts` - Tavily API æœç´¢å¼•æ“å®ç°

### å·¥å…·æ¨¡å—
- `utils/html-parser.ts` - HTML å†…å®¹è§£æå·¥å…·
- `utils/http-client.ts` - HTTP è¯·æ±‚å®¢æˆ·ç«¯
- `utils/user-agents.ts` - User-Agent ç®¡ç†
- `utils/search-cache.ts` - æœç´¢ç»“æœç¼“å­˜

## å…³é”®ä¾èµ–ä¸é…ç½®

### å¤–éƒ¨ä¾èµ–
- æ— ç‰¹æ®Šå¤–éƒ¨ä¾èµ–ï¼Œä¸»è¦ä½¿ç”¨ React Native å†…ç½®ç½‘ç»œèƒ½åŠ›

### é…ç½®è¦æ±‚
- **Bing/Google**: æ— éœ€ API Keyï¼Œä½¿ç”¨ç½‘é¡µçˆ¬å–æ–¹å¼
- **Tavily**: éœ€è¦æœ‰æ•ˆçš„ API Key
- **ç½‘ç»œç¯å¢ƒ**: éœ€è¦èƒ½å¤Ÿè®¿é—®ç›®æ ‡æœç´¢å¼•æ“

### å¹³å°å…¼å®¹æ€§
- âœ… iOS - æ”¯æŒ
- âœ… Android - æ”¯æŒ
- âœ… Web - æ”¯æŒ
- âš ï¸ æ³¨æ„ï¼šéƒ¨åˆ†æœç´¢å¼•æ“å¯èƒ½æœ‰åœ°åŒºé™åˆ¶

## æ•°æ®æ¨¡å‹

### SearchOptions
```typescript
interface SearchOptions {
  engine: 'bing' | 'google' | 'tavily';  // æœç´¢å¼•æ“
  query: string;                          // æœç´¢æŸ¥è¯¢
  maxResults?: number;                    // æœ€å¤§ç»“æœæ•° (é»˜è®¤: 5)
  timeout?: number;                       // è¶…æ—¶æ—¶é—´ (é»˜è®¤: 10ç§’)
  useCache?: boolean;                     // æ˜¯å¦ä½¿ç”¨ç¼“å­˜ (é»˜è®¤: true)
  apiKey?: string;                        // API Key (Tavily éœ€è¦)
}
```

### SearchResult
```typescript
interface SearchResult {
  title: string;                          // ç»“æœæ ‡é¢˜
  url: string;                           // ç»“æœé“¾æ¥
  snippet: string;                       // ç»“æœæ‘˜è¦
  engine: string;                        // æœç´¢å¼•æ“æ¥æº
  timestamp: number;                     // æœç´¢æ—¶é—´æˆ³
}
```

## æµ‹è¯•ä¸è´¨é‡

### å½“å‰æµ‹è¯•è¦†ç›–
- âŒ æ— è‡ªåŠ¨åŒ–æµ‹è¯•

### å»ºè®®æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•**: å„æœç´¢å¼•æ“ç‹¬ç«‹æµ‹è¯•
- **é›†æˆæµ‹è¯•**: SearchClient ç»Ÿä¸€æ¥å£æµ‹è¯•
- **Mock æµ‹è¯•**: ç½‘ç»œè¯·æ±‚çš„æ¨¡æ‹Ÿæµ‹è¯•
- **ç¼“å­˜æµ‹è¯•**: æœç´¢ç¼“å­˜æœºåˆ¶éªŒè¯

### è´¨é‡ä¿è¯
- âœ… TypeScript ç±»å‹å®‰å…¨
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… ç»Ÿä¸€çš„æ¥å£è®¾è®¡
- âœ… è¯¦ç»†çš„ JSDoc æ³¨é‡Š

## å¸¸è§é—®é¢˜ (FAQ)

### Q: æœç´¢ç»“æœä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ
A: å¯ä»¥å°è¯•ï¼š
- è°ƒæ•´æœç´¢å…³é”®è¯ï¼Œä½¿ç”¨æ›´ç²¾ç¡®çš„æè¿°
- å¢åŠ æœ€å¤§ç»“æœæ•°é™åˆ¶
- åˆ‡æ¢ä¸åŒçš„æœç´¢å¼•æ“

### Q: Tavily API è°ƒç”¨å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š
- API Key æ˜¯å¦æœ‰æ•ˆ
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- API è°ƒç”¨æ¬¡æ•°æ˜¯å¦è¶…é™

### Q: æœç´¢é€Ÿåº¦å¾ˆæ…¢ï¼Ÿ
A: å¯èƒ½åŸå› ï¼š
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š
- ç›®æ ‡æœç´¢å¼•æ“å“åº”æ…¢
- å»ºè®®å¯ç”¨ç¼“å­˜åŠŸèƒ½

### Q: æŸäº›æœç´¢ç»“æœæ— æ³•è®¿é—®ï¼Ÿ
A: å¯èƒ½åŸå› ï¼š
- ç›®æ ‡ç½‘ç«™æœ‰åœ°åŒºé™åˆ¶
- ç½‘ç«™åçˆ¬è™«æœºåˆ¶
- å»ºè®®å°è¯•å…¶ä»–æœç´¢å¼•æ“

## æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
- åŸºäºæŸ¥è¯¢å†…å®¹çš„æ™ºèƒ½ç¼“å­˜
- è‡ªåŠ¨ç¼“å­˜è¿‡æœŸæœºåˆ¶
- å†…å­˜ç¼“å­˜ï¼Œåº”ç”¨é‡å¯åæ¸…ç©º

### ç½‘ç»œä¼˜åŒ–
- å¯é…ç½®çš„è¶…æ—¶æ—¶é—´
- æ”¯æŒè¯·æ±‚å–æ¶ˆ
- æ™ºèƒ½ User-Agent è½®æ¢

### ç»“æœé™åˆ¶
- é»˜è®¤é™åˆ¶ç»“æœæ•°é‡ï¼Œé¿å…è¿‡åº¦è¯·æ±‚
- æ”¯æŒè‡ªå®šä¹‰æœ€å¤§ç»“æœæ•°
- æŸ¥è¯¢é•¿åº¦é™åˆ¶ï¼Œé˜²æ­¢æ»¥ç”¨

## ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `SearchClient.ts` - ä¸»è¦æœç´¢å®¢æˆ·ç«¯
- `types.ts` - ç±»å‹å®šä¹‰

### æœç´¢å¼•æ“
- `engines/BingSearch.ts` - Bing æœç´¢
- `engines/GoogleSearch.ts` - Google æœç´¢
- `engines/TavilySearch.ts` - Tavily API æœç´¢

### å·¥å…·æ¨¡å—
- `utils/html-parser.ts` - HTML è§£æ
- `utils/http-client.ts` - HTTP å®¢æˆ·ç«¯
- `utils/user-agents.ts` - User-Agent ç®¡ç†
- `utils/search-cache.ts` - ç¼“å­˜ç®¡ç†

### é›†æˆç‚¹
- åœ¨èŠå¤©ç»„ä»¶ä¸­é›†æˆæœç´¢åŠŸèƒ½
- è®¾ç½®é¡µé¢ä¸­é…ç½®æœç´¢å¼•æ“é€‰é¡¹
- AI æœåŠ¡ä¸­ä½¿ç”¨æœç´¢ç»“æœå¢å¼ºå¯¹è¯

## å˜æ›´è®°å½• (Changelog)

### 2025-11-05 13:45:09
- åˆå§‹åŒ–æœç´¢æœåŠ¡æ¨¡å—æ–‡æ¡£
- è¯¦ç»†è®°å½•æœç´¢å¼•æ“æ¶æ„å’Œæ¥å£è®¾è®¡
- æ·»åŠ ä½¿ç”¨ç¤ºä¾‹å’Œå¸¸è§é—®é¢˜è§£ç­”
- å»ºç«‹è´¨é‡ä¿è¯å’Œæ€§èƒ½ä¼˜åŒ–æŒ‡å¯¼